
environment:
  MINGW: C:\Qt\Tools\mingw492_32
#  matrix:
#    - RUN_CMD: "C:\\MinGW\\msys\\1.0\\bin\\sh --login /c/projects/vgmtrans/.msys_build.sh"
#    - RUN_CMD: "\"C:\\Program Files (x86)\\MSBuild\\12.0\\Bin\\MSBuild.exe\" \"src\\VGMTrans_WTL.sln\" /verbosity:minimal /logger:\"C:\\Program Files\\AppVeyor\\BuildAgent\\Appveyor.MSBuildLogger.dll\""
  global:
    MSYS2_BASEVER: 20150512
  matrix:
    - MSYS2_ARCH: i686
install:
  - appveyor DownloadFile "http://kent.dl.sourceforge.net/project/msys2/Base/%MSYS2_ARCH%/msys2-base-%MSYS2_ARCH%-%MSYS2_BASEVER%.tar.xz" -FileName "msys2.tar.xz"
  - 7z x msys2.tar.xz
  - 7z x msys2.tar > NUL
  - msys64\usr\bin\bash -lc ""
  - msys64\usr\bin\bash -lc "for i in {1..3}; do pacman --noconfirm -Suy mingw-w64-%MSYS2_ARCH%-{ragel,freetype,icu,gettext} libtool pkg-config gcc make autoconf automake perl && break || sleep 15; done"


#install:
#  - cmd: SET PATH="C:\Qt\5.5\mingw492_32\bin"

build_script:
#  - set PATH=%MINGW%\bin;%PATH%
#  - cmd: call %RUN_CMD%
  - msys32\usr\bin\bash -lc "cd $APPVEYOR_BUILD_FOLDER; PATH=$PATH:/mingw64/bin:/mingw32/bin; exec 0</dev/null; ./msys_build.sh; make"